(()=>{"use strict";const e=document.querySelector("[data-projects]"),t=document.querySelector("[data-to-do]"),s=document.querySelector("[data-description]"),o=document.getElementById("task_form_body"),d=document.querySelector("[data-new-todo-title-input]"),i=document.querySelector("[data-new-todo-desc-input]"),a=document.querySelector("[data-new-todo-prior-input]"),n=document.querySelector("[data-new-todo-date-input]"),c=document.querySelector("[data-new-todo-time-input]"),l=document.querySelector("[data-new-todo-note-input]"),r=document.getElementById("add_project"),u=document.getElementById("add_task"),m=document.getElementById("button_delete"),v=document.getElementById("button_update");m.classList.add("invis"),v.classList.add("invis");const L="projects",p="selectedProjectId1",g="selectedTaskId1",S=JSON.parse(localStorage.getItem(L))||[{id:Date.now().toString(),name:"Default Project",todos:[]}],y=()=>{t.innerHTML="",s.innerHTML="",m.classList.remove("vis"),m.classList.add("invis"),v.classList.remove("vis"),v.classList.add("invis");const e=localStorage.getItem(p),o=S.find((t=>t.id===e));t.innerHTML=`Project Name:-${o.name}`,o.todos.forEach((e=>{const d=document.createElement("li");d.dataset.taskId=e.id,d.innerText=e.name,d.onclick=()=>{((e,t)=>{const o=e.id;localStorage.setItem(g,o),(e=>{s.innerHTML="";const t=localStorage.getItem(g),o=e.todos.find((e=>e.id===t));s.innerHTML=`Name:- ${o.name} <br> Description:-${o.desc}\n          <br> Priority:- ${o.prior} <br> Date:- ${o.date} <br> note:- ${o.note} <br>\n           `,m.classList.remove("invis"),m.classList.add("vis"),v.classList.remove("invis"),v.classList.add("vis")})(t)})(e,o)},t.appendChild(d)}))},I=()=>{e.innerHTML="",s.innerHTML="",m.classList.remove("vis"),m.classList.add("invis"),v.classList.remove("vis"),v.classList.add("invis"),S.forEach((t=>{const s=document.createElement("li");s.dataset.projectId=t.id,s.innerText=t.name,s.onclick=()=>{(e=>{u.classList.remove("invis"),u.classList.add("vis");const t=e.id;localStorage.setItem(p,t),y()})(t)},e.appendChild(s)}))},f=()=>{localStorage.setItem(L,JSON.stringify(S))};m.addEventListener("click",(()=>{const e=localStorage.getItem(p),t=S.find((t=>t.id===e)),s=localStorage.getItem(g),o=t.todos.find((e=>e.id===s)),d=t.todos.indexOf(o);t.todos.splice(d,1),f(),y()})),v.addEventListener("click",(()=>{const e=localStorage.getItem(p),t=S.find((t=>t.id===e)),L=localStorage.getItem(g),y=t.todos.find((e=>e.id===L));s.innerHTML="",m.classList.remove("vis"),m.classList.add("invis"),v.classList.remove("vis"),v.classList.add("invis"),o.classList.remove("invis"),o.classList.add("vis"),d.value=y.name,i.value=y.desc,a.value=y.prior,n.value=y.date,c.value=y.time,l.value=y.note;const I=t.todos.indexOf(y);t.todos.splice(I,1),u.classList.remove("vis"),u.classList.add("invis"),r.classList.remove("vis"),r.classList.add("invis"),f()}));const E=document.getElementById("project_form_body"),q=document.getElementById("task_form_body"),w=document.querySelector("[data-new-project-input]"),_=document.querySelector("[data-new-todo-title-input]"),k=document.querySelector("[data-new-todo-desc-input]"),b=document.querySelector("[data-new-todo-prior-input]"),j=document.querySelector("[data-new-todo-date-input]"),B=document.querySelector("[data-new-todo-time-input]"),T=document.querySelector("[data-new-todo-note-input]"),D=document.getElementById("add_project"),H=document.getElementById("add_task"),M=document.getElementById("project_form"),h=document.getElementById("task_form");E.classList.add("invis"),q.classList.add("invis"),H.classList.add("invis"),D.addEventListener("click",(()=>{E.classList.remove("invis"),E.classList.add("vis")})),H.addEventListener("click",(()=>{q.classList.remove("invis"),q.classList.add("vis")})),M.addEventListener("submit",(e=>{e.preventDefault(),E.classList.remove("vis"),E.classList.add("invis");const t=w.value;if(null==t||""===t)return;const s=(o=t,{id:Date.now().toString(),name:o,todos:[]});var o;w.value=null,S.push(s),f(),I()})),h.addEventListener("submit",(e=>{e.preventDefault(),H.classList.remove("invis"),H.classList.add("vis"),D.classList.remove("invis"),D.classList.add("vis");const t=_.value,s=k.value,o=b.value,d=j.value,i=B.value,a=T.value;if(null==t||""===t)return;const n=(c=t,l=s,r=o,u=d,m=i,v=a,{id:Date.now().toString(),name:c,desc:l,prior:r,date:u,time:m,note:v,complete:!1});var c,l,r,u,m,v;const L=localStorage.getItem(p);S.find((e=>e.id===L)).todos.push(n),_.value=null,k.value=null,j.value=null,B.value=null,T.value=null,q.classList.remove("vis"),q.classList.add("invis"),f(),y(localStorage.getItem(p))})),I()})();